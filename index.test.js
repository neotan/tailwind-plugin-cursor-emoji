const createCursorEmoji = require('./createCursorEmoji')

const fontSizes = {
  'lg': ['1.125rem', { 'lineHeight': '1.75rem' }],
  'xl': ['1.25rem', { 'lineHeight': '1.75rem' }],
  '3xl': ['1.875rem', { 'lineHeight': '2.25rem' }],
  '4xl': ['2.25rem', { 'lineHeight': '2.5rem' }],
  '9xl': ['8rem', { lineHeight: '2.5rem' }],
}
const colors = {
  'green-500': '#22c55e',
  'blue-500': '#3b82f6',
  'red-500': '#ef4444',
}

const cases = [
  {
    input: 'ðŸ˜œ/lg',
    expected: {
      cursor: 'url(\'data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20width%3D%2227%22%20height%3D%2227%22%20viewport%3D%220%200%20100%20100%22%20fill%3D%22%23000000%22%20fill-opacity%3D%221.00%22%20style%3D%22font-size%3A18px%3B%22%3E%3Ctext%20x%3D%2250%25%22%20y%3D%2260%25%22%20text-anchor%3D%22middle%22%20dominant-baseline%3D%22middle%22%3E%F0%9F%98%9C%3C%2Ftext%3E%3Cpath%20d%3D%22M%201.842476487159729%208.157524108886719%20A%201.0792976844564792%201.0792976844564792%200%200%201%209.653412291754648e-8%207.394345760345459%20L%209.653412291754648e-8%201.0792977809906006%20A%201.0792976844564792%201.0792976844564792%200%200%201%201.0792977809906006%209.653412291754648e-8%20L%207.394345283508301%209.653412291754648e-8%20A%201.0792976844564792%201.0792976844564792%200%200%201%208.157524108886719%201.842476487159729%20L%201.842476487159729%208.157524108886719%20Z%20%22%20transform%3D%22matrix(1%200%200%201%20-3.92828e-7%20-0.00000107009)%22%3E%3C%2Fpath%3E%3C%2Fsvg%3E\') 0 0, auto;'
    }
  },
  {
    input: 'ðŸ˜œ',
    expected: {
      cursor: 'url(\'data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20width%3D%2239%22%20height%3D%2243%22%20viewport%3D%220%200%20100%20100%22%20fill%3D%22%23000000%22%20fill-opacity%3D%221.00%22%20style%3D%22font-size%3A32px%3B%22%3E%3Ctext%20x%3D%2250%25%22%20y%3D%2260%25%22%20text-anchor%3D%22middle%22%20dominant-baseline%3D%22middle%22%3E%F0%9F%98%9C%3C%2Ftext%3E%3Cpath%20d%3D%22M%201.842476487159729%208.157524108886719%20A%201.0792976844564792%201.0792976844564792%200%200%201%209.653412291754648e-8%207.394345760345459%20L%209.653412291754648e-8%201.0792977809906006%20A%201.0792976844564792%201.0792976844564792%200%200%201%201.0792977809906006%209.653412291754648e-8%20L%207.394345283508301%209.653412291754648e-8%20A%201.0792976844564792%201.0792976844564792%200%200%201%208.157524108886719%201.842476487159729%20L%201.842476487159729%208.157524108886719%20Z%20%22%20transform%3D%22matrix(1%200%200%201%20-3.92828e-7%20-0.00000107009)%22%3E%3C%2Fpath%3E%3C%2Fsvg%3E\') 0 0, auto;'
    }
  },
  {
    input: 'ðŸ˜œ/40',
    expected: {
      cursor: 'url(\'data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20width%3D%2247%22%20height%3D%2253%22%20viewport%3D%220%200%20100%20100%22%20fill%3D%22%23000000%22%20fill-opacity%3D%221.00%22%20style%3D%22font-size%3A40px%3B%22%3E%3Ctext%20x%3D%2250%25%22%20y%3D%2260%25%22%20text-anchor%3D%22middle%22%20dominant-baseline%3D%22middle%22%3E%F0%9F%98%9C%3C%2Ftext%3E%3Cpath%20d%3D%22M%201.842476487159729%208.157524108886719%20A%201.0792976844564792%201.0792976844564792%200%200%201%209.653412291754648e-8%207.394345760345459%20L%209.653412291754648e-8%201.0792977809906006%20A%201.0792976844564792%201.0792976844564792%200%200%201%201.0792977809906006%209.653412291754648e-8%20L%207.394345283508301%209.653412291754648e-8%20A%201.0792976844564792%201.0792976844564792%200%200%201%208.157524108886719%201.842476487159729%20L%201.842476487159729%208.157524108886719%20Z%20%22%20transform%3D%22matrix(1%200%200%201%20-3.92828e-7%20-0.00000107009)%22%3E%3C%2Fpath%3E%3C%2Fsvg%3E\') 0 0, auto;'
    }
  },
  {
    input: 'ðŸ˜œ/4xl/red',
    expected: {
      cursor: 'url(\'data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20width%3D%2243%22%20height%3D%2248%22%20viewport%3D%220%200%20100%20100%22%20fill%3D%22red%22%20fill-opacity%3D%221.00%22%20style%3D%22font-size%3A36px%3B%22%3E%3Ctext%20x%3D%2250%25%22%20y%3D%2260%25%22%20text-anchor%3D%22middle%22%20dominant-baseline%3D%22middle%22%3E%F0%9F%98%9C%3C%2Ftext%3E%3Cpath%20d%3D%22M%201.842476487159729%208.157524108886719%20A%201.0792976844564792%201.0792976844564792%200%200%201%209.653412291754648e-8%207.394345760345459%20L%209.653412291754648e-8%201.0792977809906006%20A%201.0792976844564792%201.0792976844564792%200%200%201%201.0792977809906006%209.653412291754648e-8%20L%207.394345283508301%209.653412291754648e-8%20A%201.0792976844564792%201.0792976844564792%200%200%201%208.157524108886719%201.842476487159729%20L%201.842476487159729%208.157524108886719%20Z%20%22%20transform%3D%22matrix(1%200%200%201%20-3.92828e-7%20-0.00000107009)%22%3E%3C%2Fpath%3E%3C%2Fsvg%3E\') 0 0, auto;'
    }
  },
  {
    input: 'ðŸ˜œ/4xl/green-500',
    expected: {
      cursor: 'url(\'data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20width%3D%2243%22%20height%3D%2248%22%20viewport%3D%220%200%20100%20100%22%20fill%3D%22%2322c55e%22%20fill-opacity%3D%221.00%22%20style%3D%22font-size%3A36px%3B%22%3E%3Ctext%20x%3D%2250%25%22%20y%3D%2260%25%22%20text-anchor%3D%22middle%22%20dominant-baseline%3D%22middle%22%3E%F0%9F%98%9C%3C%2Ftext%3E%3Cpath%20d%3D%22M%201.842476487159729%208.157524108886719%20A%201.0792976844564792%201.0792976844564792%200%200%201%209.653412291754648e-8%207.394345760345459%20L%209.653412291754648e-8%201.0792977809906006%20A%201.0792976844564792%201.0792976844564792%200%200%201%201.0792977809906006%209.653412291754648e-8%20L%207.394345283508301%209.653412291754648e-8%20A%201.0792976844564792%201.0792976844564792%200%200%201%208.157524108886719%201.842476487159729%20L%201.842476487159729%208.157524108886719%20Z%20%22%20transform%3D%22matrix(1%200%200%201%20-3.92828e-7%20-0.00000107009)%22%3E%3C%2Fpath%3E%3C%2Fsvg%3E\') 0 0, auto;'
    }
  },
  {
    input: 'ðŸ˜œ/4xl/#e76215',
    expected: {
      cursor: 'url(\'data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20width%3D%2243%22%20height%3D%2248%22%20viewport%3D%220%200%20100%20100%22%20fill%3D%22%23e76215%22%20fill-opacity%3D%221.00%22%20style%3D%22font-size%3A36px%3B%22%3E%3Ctext%20x%3D%2250%25%22%20y%3D%2260%25%22%20text-anchor%3D%22middle%22%20dominant-baseline%3D%22middle%22%3E%F0%9F%98%9C%3C%2Ftext%3E%3Cpath%20d%3D%22M%201.842476487159729%208.157524108886719%20A%201.0792976844564792%201.0792976844564792%200%200%201%209.653412291754648e-8%207.394345760345459%20L%209.653412291754648e-8%201.0792977809906006%20A%201.0792976844564792%201.0792976844564792%200%200%201%201.0792977809906006%209.653412291754648e-8%20L%207.394345283508301%209.653412291754648e-8%20A%201.0792976844564792%201.0792976844564792%200%200%201%208.157524108886719%201.842476487159729%20L%201.842476487159729%208.157524108886719%20Z%20%22%20transform%3D%22matrix(1%200%200%201%20-3.92828e-7%20-0.00000107009)%22%3E%3C%2Fpath%3E%3C%2Fsvg%3E\') 0 0, auto;'
    }
  },
  {
    input: 'ðŸ˜œ/4xl/rgb(231,98,21)',
    expected: {
      cursor: 'url(\'data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20width%3D%2243%22%20height%3D%2248%22%20viewport%3D%220%200%20100%20100%22%20fill%3D%22rgb(231%2C98%2C21)%22%20fill-opacity%3D%221.00%22%20style%3D%22font-size%3A36px%3B%22%3E%3Ctext%20x%3D%2250%25%22%20y%3D%2260%25%22%20text-anchor%3D%22middle%22%20dominant-baseline%3D%22middle%22%3E%F0%9F%98%9C%3C%2Ftext%3E%3Cpath%20d%3D%22M%201.842476487159729%208.157524108886719%20A%201.0792976844564792%201.0792976844564792%200%200%201%209.653412291754648e-8%207.394345760345459%20L%209.653412291754648e-8%201.0792977809906006%20A%201.0792976844564792%201.0792976844564792%200%200%201%201.0792977809906006%209.653412291754648e-8%20L%207.394345283508301%209.653412291754648e-8%20A%201.0792976844564792%201.0792976844564792%200%200%201%208.157524108886719%201.842476487159729%20L%201.842476487159729%208.157524108886719%20Z%20%22%20transform%3D%22matrix(1%200%200%201%20-3.92828e-7%20-0.00000107009)%22%3E%3C%2Fpath%3E%3C%2Fsvg%3E\') 0 0, auto;'
    }
  },
  {
    input: 'ðŸ˜œ/4xl/hsl(22deg,84%,49%)',
    expected: {
      cursor: 'url(\'data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20width%3D%2243%22%20height%3D%2248%22%20viewport%3D%220%200%20100%20100%22%20fill%3D%22hsl(22deg%2C84%25%2C49%25)%22%20fill-opacity%3D%221.00%22%20style%3D%22font-size%3A36px%3B%22%3E%3Ctext%20x%3D%2250%25%22%20y%3D%2260%25%22%20text-anchor%3D%22middle%22%20dominant-baseline%3D%22middle%22%3E%F0%9F%98%9C%3C%2Ftext%3E%3Cpath%20d%3D%22M%201.842476487159729%208.157524108886719%20A%201.0792976844564792%201.0792976844564792%200%200%201%209.653412291754648e-8%207.394345760345459%20L%209.653412291754648e-8%201.0792977809906006%20A%201.0792976844564792%201.0792976844564792%200%200%201%201.0792977809906006%209.653412291754648e-8%20L%207.394345283508301%209.653412291754648e-8%20A%201.0792976844564792%201.0792976844564792%200%200%201%208.157524108886719%201.842476487159729%20L%201.842476487159729%208.157524108886719%20Z%20%22%20transform%3D%22matrix(1%200%200%201%20-3.92828e-7%20-0.00000107009)%22%3E%3C%2Fpath%3E%3C%2Fsvg%3E\') 0 0, auto;'
    }
  },
  {
    input: 'ðŸ˜œ/4xl/blue-500/70',
    expected: {
      cursor: 'url(\'data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20width%3D%2243%22%20height%3D%2248%22%20viewport%3D%220%200%20100%20100%22%20fill%3D%22%233b82f6%22%20fill-opacity%3D%220.70%22%20style%3D%22font-size%3A36px%3B%22%3E%3Ctext%20x%3D%2250%25%22%20y%3D%2260%25%22%20text-anchor%3D%22middle%22%20dominant-baseline%3D%22middle%22%3E%F0%9F%98%9C%3C%2Ftext%3E%3Cpath%20d%3D%22M%201.842476487159729%208.157524108886719%20A%201.0792976844564792%201.0792976844564792%200%200%201%209.653412291754648e-8%207.394345760345459%20L%209.653412291754648e-8%201.0792977809906006%20A%201.0792976844564792%201.0792976844564792%200%200%201%201.0792977809906006%209.653412291754648e-8%20L%207.394345283508301%209.653412291754648e-8%20A%201.0792976844564792%201.0792976844564792%200%200%201%208.157524108886719%201.842476487159729%20L%201.842476487159729%208.157524108886719%20Z%20%22%20transform%3D%22matrix(1%200%200%201%20-3.92828e-7%20-0.00000107009)%22%3E%3C%2Fpath%3E%3C%2Fsvg%3E\') 0 0, auto;'
    }
  }
]

test.each(cases)('Create cursor for class: $input', ({ input, expected }) => {
  expect(createCursorEmoji({ fontSizes, colors })(input)).toEqual(expected)
})

describe('Log error message when the size of cursor exceeded browser limit.', () => {
  const consoleError = jest.spyOn(console, 'error').mockImplementation(() => { return })

  afterEach(() => {
    consoleError.mockClear()
  })

  afterAll(() => {
    consoleError.mockReset()
  })

  test('Log error message when Computed fontSize or height or width > MAX_CURSOR_SIZE', () => {
    createCursorEmoji({ fontSizes, colors })('ðŸ˜œ/9xl')
    expect(consoleError).toBeCalled()
  })
})
